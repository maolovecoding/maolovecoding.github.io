<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="vue3-组件化, 毛毛的博客">
    <meta name="description" content="Java,Spring,SpringBoot,Vue.js,Node.js,JUC,数据结构和算法,TypeScript,JavaScript">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>vue3-组件化 | 毛毛的博客</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="毛毛的博客" type="application/atom+xml">
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/favicon.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">毛毛的博客</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/favicon.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">毛毛的博客</div>
        <div class="logo-desc">
            
            Java,Spring,SpringBoot,Vue.js,Node.js,JUC,数据结构和算法,TypeScript,JavaScript
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/maolovecoding/" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/maolovecoding/" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/1.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">vue3-组件化</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/vue3/">
                                <span class="chip bg-color">vue3</span>
                            </a>
                        
                            <a href="/tags/ts/">
                                <span class="chip bg-color">ts</span>
                            </a>
                        
                            <a href="/tags/webpack/">
                                <span class="chip bg-color">webpack</span>
                            </a>
                        
                            <a href="/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/">
                                <span class="chip bg-color">组件化</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/vue/" class="post-category">
                                vue
                            </a>
                        
                            <a href="/categories/vue/%E7%BB%84%E4%BB%B6%E5%8C%96/" class="post-category">
                                组件化
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-11-04
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="Vue3-组件化-一-父子组件通信"><a href="#Vue3-组件化-一-父子组件通信" class="headerlink" title="Vue3 组件化(一)-父子组件通信"></a>Vue3 组件化(一)-父子组件通信</h1><h2 id="组件的嵌套"><a href="#组件的嵌套" class="headerlink" title="组件的嵌套"></a>组件的嵌套</h2><h3 id="认识组件的嵌套"><a href="#认识组件的嵌套" class="headerlink" title="认识组件的嵌套"></a>认识组件的嵌套</h3><p><strong>前面我们是将所有的逻辑放到一个 App.vue 中：</strong></p>
<ol>
<li>在之前的案例中，我们只是创建了一个组件 App；</li>
<li>如果我们一个应用程序将所有的逻辑都放在一个组件中，那么这个组件就会变成非 常的臃肿和难以维护；</li>
<li>所以组件化的核心思想应该是对组件进行拆分，拆分成一个个小的组件；</li>
<li>再将这些组件组合嵌套在一起，最终形成我们的应用程序；</li>
</ol>
<p>我们来分析一下下面代码的嵌套逻辑，假如我们将所有的代码逻辑都放到一个 App.vue 组件中：</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210807201258559.png" alt="image-20210807201258559"></p>
<ol>
<li>我们会发现，将所有的代码逻辑全部放到一个组件中，代码是非常的臃肿和难以维 护的。</li>
<li>并且在真实开发中，我们会有更多的内容和代码逻辑，对于扩展性和可维护性来说 都是非常差的。</li>
<li>所以，在真实的开发中，我们会对组件进行拆分，拆分成一个个功能的小组件。</li>
</ol>
<h3 id="组件的拆分"><a href="#组件的拆分" class="headerlink" title="组件的拆分"></a>组件的拆分</h3><p><strong>我们可以按照如下的方式进行拆分：</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210807201350134.png" alt="image-20210807201350134"></p>
<p>按照如上的拆分方式后，我们开发对应的逻辑只需要去对应的组件编写就可。</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">App.vue文件

&lt;template lang="html"&gt;
  &lt;!-- 使用局部组件 --&gt;
  &lt;div id="app"&gt;
    &lt;Header&gt;&lt;/Header&gt;
    &lt;!-- 如果组件不需要填充数据或标签等，可以直接使用单标签 --&gt;
    &lt;Main /&gt;
    &lt;Footer /&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
// 导入vue组件
import Header from "./Header";
import Main from "./Main";
import Footer from "./Footer";
export default {
  data() {
    return {};
  },
  // 注册局部组件
  components: {
    Header,
    Main,
    Footer,
  },
};
&lt;/script&gt;
&lt;style scoped&gt;&lt;/style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">Header.vue

&lt;template lang=""&gt;
  &lt;div id="header"&gt;
    &lt;h2&gt;哈哈哈&lt;/h2&gt;
    &lt;h2&gt;header&lt;/h2&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {};
&lt;/script&gt;
&lt;style scoped&gt;&lt;/style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">Main.vue

&lt;template&gt;
  &lt;div id="main"&gt;
    &lt;h2&gt;haha&lt;/h2&gt;
    &lt;h3&gt;main&lt;/h3&gt;
    &lt;main-banner&gt;&lt;/main-banner&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import MainBanner from "./MainBanner.vue";
export default {
  components: { MainBanner },
};
&lt;/script&gt;

&lt;style scoped&gt;&lt;/style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">MainBanner.vue

&lt;template&gt;
  &lt;ul&gt;
    &lt;li&gt;商品信息1&lt;/li&gt;
    &lt;li&gt;商品信息2&lt;/li&gt;
    &lt;li&gt;商品信息3&lt;/li&gt;
    &lt;li&gt;商品信息4&lt;/li&gt;
    &lt;li&gt;商品信息5&lt;/li&gt;
  &lt;/ul&gt;
&lt;/template&gt;

&lt;script&gt;
export default {};
&lt;/script&gt;

&lt;style scoped&gt;&lt;/style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">Footer.vue

&lt;template&gt;
  &lt;div id="footer"&gt;
    &lt;h2&gt;main&lt;/h2&gt;
    &lt;h2&gt;hahah&lt;/h2&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {};
&lt;/script&gt;

&lt;style scoped&gt;&lt;/style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210807202015394.png" alt="image-20210807202015394"></p>
<h2 id="组件的通信"><a href="#组件的通信" class="headerlink" title="组件的通信"></a>组件的通信</h2><h3 id="组件的通信-1"><a href="#组件的通信-1" class="headerlink" title="组件的通信"></a>组件的通信</h3><p><strong>上面的嵌套逻辑如下，它们存在如下关系：</strong></p>
<ol>
<li>App 组件是 Header、Main、Footer 组件的父组件；</li>
<li>Main 组件是 Banner、ProductList 组件的父组件；</li>
</ol>
<p>在开发过程中，我们会经常遇到需要<strong>组件之间相互进行通信：</strong></p>
<ol>
<li>比如 App 可能使用了多个 Header，每个地方的 Header 展示的内容不同，那么我们就需要使用者传递给 Header 一些数据，让其进行展示；</li>
<li>又比如我们在 Main 中一次性请求了 Banner 数据和 ProductList 数据，那么就需要传递给它们来进行展示；</li>
<li>也可能是子组件中发生了事件，需要由父组件来完成某些操作，那就需要子组件向父组件传递事件；</li>
</ol>
<p>总之，在一个 Vue 项目中，组件之间的通信是非常重要的环节，所以接下来我们就具体学习一下组件之间是如何相 互之间传递数据的；</p>
<h3 id="父子组件之间通信的方式"><a href="#父子组件之间通信的方式" class="headerlink" title="父子组件之间通信的方式"></a>父子组件之间通信的方式</h3><p><strong>父子组件之间如何进行通信呢？</strong></p>
<ol>
<li>父组件传递给子组件：通过<strong>props</strong>属性；</li>
<li>子组件传递给父组件：通过**$emit**触发事件；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210807201629967.png" alt="image-20210807201629967"></p>
<h3 id="父组件传递给子组件"><a href="#父组件传递给子组件" class="headerlink" title="父组件传递给子组件"></a>父组件传递给子组件</h3><p>在开发中很常见的就是父子组件之间通信，比如父组件有一些数据，需要子组件来进行展示：</p>
<p>这个时候我们可以通过<strong>props</strong>来完成组件之间的通信；</p>
<p><strong>什么是 Props 呢？</strong></p>
<ol>
<li>Props 是你可以在组件上注册一些自定义的<strong>attribute；</strong></li>
<li>父组件给这些 attribute 赋值，子组件通过<strong>attribute</strong>的名称获取到对应的值；</li>
</ol>
<p><strong>Props 有两种常见的用法：</strong></p>
<ol>
<li>方式一：字符串数组，数组中的字符串就是 attribute 的名称；</li>
<li>方式二：对象类型，对象类型我们可以在指定 attribute 名称的同时，指定它需要传递的类型、是否是必须的、 默认值等等</li>
</ol>
<h4 id="Props-的数组用法"><a href="#Props-的数组用法" class="headerlink" title="Props 的数组用法"></a>Props 的数组用法</h4><p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210807202329042.png" alt="image-20210807202329042"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210807202350113.png" alt="image-20210807202350113"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210807202358342.png" alt="image-20210807202358342"></p>
<h4 id="Props-的对象用法"><a href="#Props-的对象用法" class="headerlink" title="Props 的对象用法"></a>Props 的对象用法</h4><p>数组用法中我们只能说明传入的<strong>attribute</strong>的名称，并不能对其进行任何形式的限制，接下来我们来看一下对象的 写法是如何让我们的<strong>props</strong>变得更加完善的。</p>
<p><strong>当使用对象语法的时候，我们可以对传入的内容限制更多：</strong></p>
<ol>
<li>比如指定传入的 attribute 的类型；</li>
<li>比如指定传入的 attribute 是否是必传的；</li>
<li>比如指定没有传入时，attribute 的默认值；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210807202626613.png" alt="image-20210807202626613"></p>
<h4 id="细节一：type-类型"><a href="#细节一：type-类型" class="headerlink" title="细节一：type 类型"></a>细节一：type 类型</h4><p><strong>那么 type 的类型都可以是哪些呢？</strong></p>
<ol>
<li>String</li>
<li>Number</li>
<li>Boolean</li>
<li>Array</li>
<li>Object</li>
<li>Date</li>
<li>Function</li>
<li>Symbol(ES6 新增的基本类型)</li>
</ol>
<h4 id="细节二：对象类型的其他写法"><a href="#细节二：对象类型的其他写法" class="headerlink" title="细节二：对象类型的其他写法"></a>细节二：对象类型的其他写法</h4><p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210807204244840.png" alt="image-20210807204244840"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210807204255330.png" alt="image-20210807204255330"></p>
<h4 id="细节三：Prop-的大小写命名"><a href="#细节三：Prop-的大小写命名" class="headerlink" title="细节三：Prop 的大小写命名"></a>细节三：Prop 的大小写命名</h4><p><strong>Prop 的大小写命名(camelCase vs kebab-case)</strong></p>
<ol>
<li>HTML 中的 attribute 名是大小写不敏感的，所以浏览器会把所有大写字符解释为小写字符；</li>
<li>这意味着当你使用 DOM 中的模板时，camelCase (驼峰命名法) 的 prop 名需要使用其等价的 kebab-case (短 横线分隔命名) 命名</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210807205803322.png" alt="image-20210807205803322"></p>
<h4 id="非-Prop-的-Attribute"><a href="#非-Prop-的-Attribute" class="headerlink" title="非 Prop 的 Attribute"></a>非 Prop 的 Attribute</h4><p><strong>什么是非 Prop 的 Attribute 呢？</strong></p>
<p>当我们传递给一个组件某个属性，但是该属性并没有定义对应的 props 或者 emits 时，就称之为 非 Prop 的 Attribute；</p>
<p>常见的包括 class、style、id 属性等；</p>
<p><strong>Attribute 继承</strong></p>
<p>当组件有单个根节点时，非 Prop 的<strong>Attribute</strong>将自动添加到根节点的 Attribute 中：</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210807210559784.png" alt="image-20210807210559784"></p>
<h4 id="禁用-Attribute-继承和多根节点"><a href="#禁用-Attribute-继承和多根节点" class="headerlink" title="禁用 Attribute 继承和多根节点"></a>禁用 Attribute 继承和多根节点</h4><p>如果我们不希望组件的根元素继承<strong>attribute</strong>，可以在组件中设置 <strong>inheritAttrs: false：</strong></p>
<ol>
<li><p>禁用 attribute 继承的常见情况是需要将 attribute 应用于根元素之外的其他元素；</p>
</li>
<li><p>我们可以通过 <strong>$attrs</strong>来访问所有的 非 props 的 attribute；</p>
</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210808084721740.png" alt="image-20210808084721740"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210808084819837.png" alt="image-20210808084819837"></p>
<hr>
<p><strong>多个根节点的 attribute</strong></p>
<p>多个根节点的<strong>attribute</strong>如果<strong>没有显示的绑定</strong>，那么<strong>会报警告</strong>，我们必须手动的指定要绑定到哪一个属性上：</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210808085158545.png" alt="image-20210808085158545"></p>
<p><strong>如果我们不继承父组件的 attribute 属性，设置了 <code>inheritAttrs:false</code>，那么则不会报警告。没有根节点会继承根元素的属性。</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210808085525363.png" alt="image-20210808085525363"></p>
<h3 id="子组件传递给父组件"><a href="#子组件传递给父组件" class="headerlink" title="子组件传递给父组件"></a>子组件传递给父组件</h3><h4 id="子组件传递给父组件-1"><a href="#子组件传递给父组件-1" class="headerlink" title="子组件传递给父组件"></a>子组件传递给父组件</h4><p><strong>什么情况下子组件需要传递内容到父组件呢</strong></p>
<ol>
<li>当子组件有一些事件发生的时候，比如在组件中发生了点击，父组件需要切换内容；</li>
<li>子组件有一些内容想要传递给父组件的时候；</li>
</ol>
<p><strong>我们如何完成上面的操作呢？</strong></p>
<ul>
<li>首先，我们需要在子组件中定义好在某些情况下触发的事件名称；</li>
<li>其次，在父组件中以 v-on 的方式传入要监听的事件名称，并且绑定到对应的方法中；</li>
<li>最后，在子组件中发生某个事件的时候，根据事件名称触发对应的事件；</li>
</ul>
<h4 id="自定义事件的流程"><a href="#自定义事件的流程" class="headerlink" title="自定义事件的流程"></a>自定义事件的流程</h4><p>我们封装一个 CounterOperation.vue 的组件：</p>
<p>内部其实是监听两个按钮的点击，点击之后通过 this.$emit 的方式发出去事件；</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210808094848820.png" alt="image-20210808094848820"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210808095011935.png" alt="image-20210808095011935"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210808095038389.png" alt="image-20210808095038389"></p>
<h4 id="自定义事件的参数和验证"><a href="#自定义事件的参数和验证" class="headerlink" title="自定义事件的参数和验证"></a>自定义事件的参数和验证</h4><p>自定义事件的时候，我们也可以传递一些参数给父组件：</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210808095143390.png" alt="image-20210808095143390"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210808095210856.png" alt="image-20210808095210856"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210808095219037.png" alt="image-20210808095219037"></p>
<p><strong>在 vue3 当中，我们可以对传递的参数进行验证：</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210808095252388.png" alt="image-20210808095252388"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210808095326833.png" alt="image-20210808095326833"></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">App.vue

&lt;template&gt;
  &lt;div&gt;
    &lt;h2&gt;当前计数：{{ counter }}&lt;/h2&gt;
    &lt;!-- 监听子组件触发的事件 --&gt;
    &lt;!-- 子组件触发的是什么事件，我们就需要监听什么事件 --&gt;
    &lt;!-- 就如这里：子组件触发的是add和sub事件，那么我们监听的必然是add和sub事件 --&gt;
    &lt;!-- 但是我们监听到的事件用的处理函数是任意的，addOne，subOne是任意的 --&gt;
    &lt;counter-operation
      @add="addOne"
      @sub="subOne"
      @addN="addN"
    &gt;&lt;/counter-operation&gt;
    &lt;!-- 注意：监听子组件的事件时，我们绑定的事件处理函数不要带括号，不然无法接收到子组件传递出来的参数 --&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import CounterOperation from "./CounterOperation.vue";
export default {
  components: { CounterOperation },
  data() {
    return {
      counter: 0,
    };
  },
  methods: {
    addOne() {
      this.counter++;
    },
    subOne() {
      this.counter--;
    },
    // 事件处理函数可以接收子组件触发事件时传递给父组件的参数
    // 在括号上写的形参就会直接被子组件传递的参数赋值
    // 我们可以直接使用，多个参数也是一样
    addN(num) {
      this.counter += num;
    },
  },
};
&lt;/script&gt;

&lt;style scoped&gt;&lt;/style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">CounterOperation.vue

&lt;template&gt;
  &lt;div&gt;
    &lt;button @click="increment"&gt;+&lt;/button&gt;
    &lt;button @click="decrement"&gt;-&lt;/button&gt;

    &lt;input type="text" v-model.number="num" /&gt;
    &lt;br /&gt;
    &lt;button @click="incrementN"&gt;+n&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  // 子组件会触发的事件，写在 emits属性上
  // emits 可以是数组，也可以是对象，用的多的是数组
  // 这是Vue3的写法，需要触发的事件需要先注册
  // emits: ['add', 'sub', 'addN'],

  // emits 对象写法，可以进行参数的验证
  emits: {
    // null 表示不需要进行参数的验证
    add: null,
    sub: null,
    // 需要验证的话，触发的事件后面是一个验证参数的函数
    // 我们可以写成箭头函数
    // 返回 true 表示参数验证通过，fasle则验证失败，会报警告
    // 注意：验证失败也会把参数传递过去的！！！！
    addN: (payload) =&gt; {
      console.log(typeof payload);
      // 看看是不是number类型
      if (typeof payload === "number") return true;
      return false;
    },
  },

  data() {
    return {
      num: 0,
    };
  },
  methods: {
    increment() {
      // 触发我们注册的 add事件
      this.$emit("add");
    },
    decrement() {
      // 触发我们注册的 sub 事件
      this.$emit("sub");
    },
    incrementN() {
      // 触发addN事件，一次加N个数，所以需要我们把加的数也传递出去
      // 需要几个参数就传递几个参数
      this.$emit("addN", this.num);
    },
  },
};
&lt;/script&gt;

&lt;style scoped&gt;
button {
  margin-right: 20px;
}
&lt;/style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="Vue3-组件化开发-二-非父子组件通信及插槽的使用"><a href="#Vue3-组件化开发-二-非父子组件通信及插槽的使用" class="headerlink" title="Vue3 组件化开发(二)-非父子组件通信及插槽的使用"></a>Vue3 组件化开发(二)-非父子组件通信及插槽的使用</h1><h2 id="非父子组件的通信"><a href="#非父子组件的通信" class="headerlink" title="非父子组件的通信"></a>非父子组件的通信</h2><p>在开发中，我们构建了组件树之后，除了<strong>父子组件之间的通信</strong>之外，还会有非父<strong>子组件之间的通信。</strong></p>
<p><strong>这里我们主要讲两种方式：</strong></p>
<ol>
<li><strong>Provide/Inject；</strong></li>
<li><strong>Mitt 全局事件总线；</strong></li>
</ol>
<h3 id="Provide-和-Inject"><a href="#Provide-和-Inject" class="headerlink" title="Provide 和 Inject"></a>Provide 和 Inject</h3><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><p>Provide/Inject 用于<strong>非父子组件之间共享数据</strong>：</p>
<ol>
<li>比如有一些<strong>深度嵌套的组件</strong>，子组件想要获取父组件的部分内 容；</li>
<li>在这种情况下，如果我们仍然将 props 沿着组件链逐级传递下 去，就会非常的麻烦；</li>
</ol>
<p>对于这种情况下，我们可以使用 <strong>Provide 和 Inject</strong> ：</p>
<ol>
<li>无论层级结构有多深，父组件都可以作为其所有子组件的依赖 提供者</li>
<li>父组件有一个 <strong>provide 选项</strong>来提供数据；</li>
<li>子组件有一个 <strong>inject 选项</strong>来开始使用这些数据；</li>
</ol>
<p>实际上，你可以将依赖注入看作是“long range props”，除了：</p>
<ol>
<li>父组件不需要知道哪些子组件使用它 provide 的 property</li>
<li>子组件不需要知道 inject 的 property 来自哪里</li>
</ol>
<h4 id="Provide-和-Inject-基本使用"><a href="#Provide-和-Inject-基本使用" class="headerlink" title="Provide 和 Inject 基本使用"></a>Provide 和 Inject 基本使用</h4><p><strong>我们开发一个这样的结构：</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210809213806778.png" alt="image-20210809213806778"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210809214129165.png" alt="image-20210809214129165"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210809215147771.png" alt="image-20210809215147771"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210809215151699.png" alt="image-20210809215151699"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210809215402748.png" alt="image-20210809215402748"></p>
<h4 id="Provide-和-Inject-函数的写法"><a href="#Provide-和-Inject-函数的写法" class="headerlink" title="Provide 和 Inject 函数的写法"></a>Provide 和 Inject 函数的写法</h4><p>如果 Provide 中提供的一些数据是来自 data，那么我们可能会想要通过 this 来获取：</p>
<p><strong>这个时候会报错：</strong></p>
<p>这里给大家留一个思考题，我们的 this 使用的是哪里的 this？</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210809215637892.png" alt="image-20210809215637892"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210809215733865.png" alt="image-20210809215733865"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210809215653396.png" alt="image-20210809215653396"></p>
<h5 id="对象类型的写法"><a href="#对象类型的写法" class="headerlink" title="对象类型的写法"></a>对象类型的写法</h5><p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210809220311862.png" alt="image-20210809220311862"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210809220405128.png" alt="image-20210809220405128"></p>
<p><strong>我们发现往 names 里面添加元素，非子组件拿到的 names 的 length 也不会响应式的方式改变</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210809220611680.png" alt="image-20210809220611680"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210809220623869.png" alt="image-20210809220623869"></p>
<h4 id="处理响应式数据"><a href="#处理响应式数据" class="headerlink" title="处理响应式数据"></a>处理响应式数据</h4><p>我们先来验证一个结果：如果我们修改了 this.names 的内容，那么使用 length 的子组件会不会是响应式的？</p>
<p>我们会发现对应的<strong>子组件中是没有反应的：</strong></p>
<p>这是因为当我们修改了 names 之后，之前在 provide 中引入的 <strong>this.names.length</strong> 本身并不是响应式的；</p>
<p><strong>那么怎么样可以让我们的数据变成响应式的呢？</strong></p>
<ol>
<li>非常的简单，我们可以使用<strong>响应式的一些 API</strong>来完成这些功能，比如说 computed 函数；</li>
<li>当然，这个<strong>computed 是 vue3</strong>的新特性，在后面我会专门讲解，这里大家可以先直接使用一下；</li>
</ol>
<p><strong>注意：我们在使用 length 的时候需要获取其中的 value</strong></p>
<p>这是因为 computed 返回的是一个 ref 对象，需要取出其中的 value 来使用；</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210809221124200.png" alt="image-20210809221124200"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210809221148276.png" alt="image-20210809221148276"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210809221256512.png" alt="image-20210809221256512"></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">App.vue

&lt;template&gt;
  &lt;div&gt;
    &lt;home&gt;&lt;/home&gt;
    &lt;!-- 测试数组长度发生改变，通过provide传递到子组件的数组长度是否发生改变 --&gt;
    &lt;button @click="names.push('张三')"&gt;添加names&lt;/button&gt;
    &lt;!-- 结论：不会发生改变 --&gt;
    &lt;ul&gt;
      &lt;li v-for="item in names" :key="item"&gt;{{ item }}&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Home from "./Home.vue";
// 导入 vue 中的computed函数 （暂时使用，后面会讲）
import { computed } from "vue";
export default {
  components: { Home },
  // 我们可以通过 provide属性 直接提供数据供任意层级的子类使用（比如孙子组件，曾孙组件）
  /* provide: {
    info: {
      name: '毛毛',
      age: 21,
      message: '好好学vue.js！闷声发大财！'
    },
    test: '哈哈，测试一下别名好不好使！',
    length:this.names.length
  }, */
  // 如果想要在provide中使用data中的数据，那也就是必须用到了this
  // 那么这时候我们需要把provide写成函数的形式，返回一个对象
  // 这样才能在使用this。函数绑定了当前组件的this
  provide() {
    return {
      info: {
        name: "毛毛",
        age: 21,
        message: "好好学vue.js！闷声发大财！",
      },
      test: "哈哈，测试一下别名好不好使！",
      // 获取 names数组的长度 这种获取的方式并不是响应式的
      // length: this.names.length,

      // 通过 computed函数 响应式的传递数据
      // computed函数的返回值是一个 ref对象
      // 我们真正的值在 ref对象的value属性上,所以子类组件取值的时候，需要通过value属性获取
      // 一旦我们监听的值发生了改变，就会重新计算
      length: computed(() =&gt; this.names.length),
    };
  },
  data() {
    return {
      names: ["哈哈", "哼哼", "呵呵"],
    };
  },
};
&lt;/script&gt;

&lt;style scoped&gt;&lt;/style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">Home.vue

&lt;template&gt;
  &lt;div&gt;
    &lt;home-content&gt;&lt;/home-content&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import HomeContent from "./HomeContent.vue";
export default {
  components: { HomeContent },
};
&lt;/script&gt;

&lt;style scoped&gt;&lt;/style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">HomeContent.vue

&lt;template&gt;
  &lt;div&gt;
    &lt;h2&gt;我是HomeContent.vue!&lt;/h2&gt;
    &lt;ul&gt;
      &lt;li v-for="(value, key) in info" :key="key"&gt;{{ key }}---&gt;{{ value }}&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h3&gt;{{ homeTest }}&lt;/h3&gt;
    &lt;!-- 提示 test 没有被定义 --&gt;
    &lt;!-- &lt;h3&gt;{{ test }}&lt;/h3&gt; --&gt;
    &lt;!-- 发现父类（统称）传递数据的时候使用了computed函数的话，
      我们取值的时候通过该函数返回对象的value属性拿真正的值就是响应式的了
    --&gt;
    &lt;!-- &lt;h3&gt;{{ length }}&lt;/h3&gt; --&gt;
    &lt;h3&gt;{{ length.value }}&lt;/h3&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  // provide提供数据的注入，需要什么属性对应的数据，就注入什么属性
  // inject: ['info']
  // 起别名： 别名：注册的属性。在组件中可以使用别名，不能使用父组件提供的原来的属性名了
  inject: {
    info: "info",
    homeTest: "test",
    length: "length",
  },
};
&lt;/script&gt;

&lt;style scoped&gt;&lt;/style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="全局事件总线-mitt-库"><a href="#全局事件总线-mitt-库" class="headerlink" title="全局事件总线 mitt 库"></a>全局事件总线 mitt 库</h3><p><strong>事件总线的函数可以自己写，本质上是使用了发布订阅的设计模式。</strong></p>
<p>Vue3 从实例中移除了 <strong>$on、$off 和 $once</strong> 方法，所以我们如果希望继续使用全局事件总线，要通过第三方的库：</p>
<ol>
<li>Vue3 官方有推荐一些库，例如 <strong>mitt</strong> 或 <strong>tiny-emitter；</strong></li>
<li>这里我们主要讲解一下 mitt 库的使用；</li>
</ol>
<p><strong>首先，我们需要先安装这个库：</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">npm install mitt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>其次，我们可以封装一个工具 eventbus.js：</strong></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">/* 事件总线的封装 */</span>
<span class="token comment">// 导入第三方库，返回值是一个函数</span>
<span class="token keyword">import</span> mitt <span class="token keyword">from</span> <span class="token string">"mitt"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> emitter <span class="token operator">=</span> <span class="token function">mitt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> emitter<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="使用事件总线工具"><a href="#使用事件总线工具" class="headerlink" title="使用事件总线工具"></a>使用事件总线工具</h4><p><strong>在项目中可以使用它们：</strong></p>
<ol>
<li>我们在 HomeContent.vue 中监听事件；</li>
<li>我们在 Subling.vue 中发射（触发）事件；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810090811490.png" alt="image-20210810090811490"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810090846400.png" alt="image-20210810090846400"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810091003293.png" alt="image-20210810091003293"></p>
<h4 id="Mitt-的事件取消"><a href="#Mitt-的事件取消" class="headerlink" title="Mitt 的事件取消"></a>Mitt 的事件取消</h4><p><strong>在某些情况下我们可能希望取消掉之前注册的函数监听：</strong></p>
<ol>
<li><p><strong>取消所有的监听事件</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810091115213.png" alt="image-20210810091115213"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810091126907.png" alt="image-20210810091126907"></p>
</li>
<li><p><strong>取消某个事件的监听</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810091717819.png" alt="image-20210810091717819"></p>
</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810091746955.png" alt="image-20210810091746955"></p>
<h2 id="组件插槽-Slot"><a href="#组件插槽-Slot" class="headerlink" title="组件插槽 Slot"></a>组件插槽 Slot</h2><h3 id="认识插槽-Slot"><a href="#认识插槽-Slot" class="headerlink" title="认识插槽 Slot"></a>认识插槽 Slot</h3><p><strong>在开发中，我们会经常封装一个个可复用的组件：</strong></p>
<ol>
<li>前面我们会通过 props 传递给组件一些数据，让组件来进行展示；</li>
<li>但是为了让这个组件具备更强的通用性，我们不能将组件中的内容限制为固定的 div、span 等等这些元素；</li>
<li>比如某种情况下我们使用组件，希望组件显示的是一个按钮，某种情况下我们使用组件希望显示的是一张图片；</li>
<li>我们应该让使用者可以决定某一块区域到底存放什么内容和元素；</li>
</ol>
<p><strong>举个栗子：假如我们定制一个通用的导航组件 - NavBar</strong></p>
<ol>
<li>这个组件分成三块区域：左边-中间-右边，每块区域的内容是不固定；</li>
<li>左边区域可能显示一个菜单图标，也可能显示一个返回按钮，可能什么都不显示；</li>
<li>中间区域可能显示一个搜索框，也可能是一个列表，也可能是一个标题，等等；</li>
<li>右边可能是一个文字，也可能是一个图标，也可能什么都不显示；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810091923684.png" alt="image-20210810091923684"></p>
<h3 id="如何使用插槽-slot？"><a href="#如何使用插槽-slot？" class="headerlink" title="如何使用插槽 slot？"></a>如何使用插槽 slot？</h3><p><strong>这个时候我们就可以来定义插槽 slot：</strong></p>
<ol>
<li>插槽的使用过程其实是抽取共性、预留不同；</li>
<li>我们会将共同的元素、内容依然在组件内进行封装；</li>
<li>同时会将不同的元素使用 slot 作为占位，让外部决定到底显示什么样的元素；</li>
</ol>
<p><strong>如何使用 slot 呢？</strong></p>
<ol>
<li>Vue 中将<code>&lt;slot&gt;</code> 元素作为承载分发内容的出口；</li>
<li>在封装组件中，使用特殊的元素<code>&lt;slot&gt;</code>就可以为封装组件开启一个插槽；</li>
<li>该插槽<strong>插入什么内容</strong>取决于父组件如何使用；</li>
</ol>
<h3 id="插槽的基本使用"><a href="#插槽的基本使用" class="headerlink" title="插槽的基本使用"></a>插槽的基本使用</h3><h4 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h4><p>我们一个组件 MySlotCpn.vue：该组件中有一个插槽，我们可以在插槽中放入需要显示的内容；</p>
<p>我们在 App.vue 中使用它们：我们可以插入普通的内容、html 元素、组件元素，都可以是可以的；</p>
<p><strong>预留的插槽我们不填充任何数据时：</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810095927253.png" alt="image-20210810095927253"></p>
<p><strong>使用组件时往插槽插入数据：</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810100208843.png" alt="image-20210810100208843"></p>
<p><strong>往组件插槽中填充自定义组件：</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810100931706.png" alt="image-20210810100931706"></p>
<h4 id="插槽的默认内容"><a href="#插槽的默认内容" class="headerlink" title="插槽的默认内容"></a>插槽的默认内容</h4><p>有时候我们希望在使用插槽时，如果没有插入对应的内容，那么我们需要显示一个<strong>默认的内容</strong>：</p>
<p>当然这个默认的内容只会在没有提供插入的内容时，才会显示；</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810101443748.png" alt="image-20210810101443748"></p>
<h4 id="多个插槽的效果"><a href="#多个插槽的效果" class="headerlink" title="多个插槽的效果"></a>多个插槽的效果</h4><p>我们先测试一个知识点：如果一个组件中含有<strong>多个插槽</strong>，我们插入多个内容时是什么效果？</p>
<p>我们会发现默认情况下每个插槽都会获取到我们插入的内容来显示；</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810104919157.png" alt="image-20210810104919157"></p>
<h4 id="具名插槽的使用"><a href="#具名插槽的使用" class="headerlink" title="具名插槽的使用"></a>具名插槽的使用</h4><p>事实上，我们希望达到的效果是插槽对应的显示，这个时候我们就可以使用 具名插槽：</p>
<ol>
<li>具名插槽顾名思义就是给插槽起一个名字，<code>&lt;slot&gt;</code> 元素有一个特殊的 <strong>attribute：name；</strong></li>
<li>一个<strong>不带 name</strong> 的 slot，会带有隐含的名字 default；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810112506472.png" alt="image-20210810112506472"></p>
<h4 id="动态插槽名"><a href="#动态插槽名" class="headerlink" title="动态插槽名"></a>动态插槽名</h4><p><strong>什么是动态插槽名呢？</strong></p>
<ol>
<li>目前我们使用的插槽名称都是固定的；</li>
<li>比如 v-slot:left、v-slot:center 等等；</li>
<li>我们可以通过 v-slot:[dynamicSlotName]方式动态绑定一个名称；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810113654563.png" alt="image-20210810113654563"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810113842773.png" alt="image-20210810113842773"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810113909486.png" alt="image-20210810113909486"></p>
<h4 id="具名插槽使用的时候缩写"><a href="#具名插槽使用的时候缩写" class="headerlink" title="具名插槽使用的时候缩写"></a>具名插槽使用的时候缩写</h4><p><strong>具名插槽使用的时候缩写：</strong></p>
<ol>
<li>跟 <strong>v-on 和 v-bind</strong> 一样，<strong>v-slot</strong> 也有缩写；</li>
<li>即把参数之前的所有内容 <strong>(v-slot:)</strong> 替换为字符 **#**；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810130048326.png" alt="image-20210810130048326"></p>
<h2 id="渲染作用域"><a href="#渲染作用域" class="headerlink" title="渲染作用域"></a>渲染作用域</h2><p><strong>在 Vue 中有渲染作用域的概念：</strong></p>
<ol>
<li>父级模板里的所有内容都是在<strong>父级作用域</strong>中编译的；</li>
<li>子模板里的所有内容都是在<strong>子作用域中编译</strong>的；</li>
</ol>
<p>如何理解这句话呢？我们来看一个案例：</p>
<ol>
<li>在我们的案例中 ChildCpn 自然是可以让问自己作用域中的 title 内容的；</li>
<li>但是在 App 中，是访问不了 ChildCpn 中的内容的，因为它们是跨作用域的访问；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810131433831.png" alt="image-20210810131433831"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810131437971.png" alt="image-20210810131437971"></p>
<h3 id="认识作用域插槽"><a href="#认识作用域插槽" class="headerlink" title="认识作用域插槽"></a>认识作用域插槽</h3><p><strong>但是有时候我们希望插槽可以访问到子组件中的内容是非常重要的：</strong></p>
<ol>
<li>当一个组件被用来渲染一个数组元素时，我们使用插槽，并且希望插槽中没有显示每项的内容；</li>
<li>这个 Vue 给我们提供了作用域插槽；</li>
</ol>
<p><strong>我们来看下面的一个案例：</strong></p>
<ol>
<li>在 App.vue 中定义好数据</li>
<li>传递给 ShowNames 组件中</li>
<li>ShowNames 组件中遍历 names 数据</li>
<li>定义插槽的 prop</li>
<li>通过 v-slot:default 的方式获取到 slot 的 props</li>
<li>使用 slotProps 中的 item 和 index</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810133254354.png" alt="image-20210810133254354"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810133335479.png" alt="image-20210810133335479"></p>
<p><strong>发现我们传递的标签不同，最后的显示效果就不同，甚至我们还可以控制那些数据显示，那些不显示</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810133425113.png" alt="image-20210810133425113"></p>
<h4 id="独占默认插槽的缩写"><a href="#独占默认插槽的缩写" class="headerlink" title="独占默认插槽的缩写"></a>独占默认插槽的缩写</h4><p>如果我们的插槽是默认插槽 default，那么在使用的时候 v-slot:default=”slotProps”可以简写为 v-slot=”slotProps”：</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810134528571.png" alt="image-20210810134528571"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810134532181.png" alt="image-20210810134532181"></p>
<p>并且如果我们的插槽只有默认插槽时，组件的标签可以被当做插槽的模板来使用，这样，我们就可以将 <strong>v-slot</strong> 直 接用在组件上：</p>
<p><strong>这种写法是简写，可以不使用到 template 标签。但是有局限</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810134623858.png" alt="image-20210810134623858"></p>
<h4 id="默认插槽和具名插槽混合"><a href="#默认插槽和具名插槽混合" class="headerlink" title="默认插槽和具名插槽混合"></a>默认插槽和具名插槽混合</h4><p><strong>但是，如果我们有默认插槽和具名插槽，那么按照完整的 template 来编写。</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810134955626.png" alt="image-20210810134955626"></p>
<p><strong>只要出现多个插槽，请始终为所有的插槽使用完整的基于 <code>&lt;template&gt;语法</code></strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210810135256596.png" alt="image-20210810135256596"></p>
<h1 id="Vue3-组件化开发-三-动态-异步组件-vue3-生命周期"><a href="#Vue3-组件化开发-三-动态-异步组件-vue3-生命周期" class="headerlink" title="Vue3 组件化开发(三)-动态/异步组件-vue3 生命周期"></a>Vue3 组件化开发(三)-动态/异步组件-vue3 生命周期</h1><h2 id="切换组件案例"><a href="#切换组件案例" class="headerlink" title="切换组件案例"></a>切换组件案例</h2><p><strong>比如我们现在想要实现了一个功能：</strong></p>
<p>点击一个 tab-bar，切换不同的组件显示；</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210811211016025.png" alt="image-20210811211016025"></p>
<p><strong>这个案例我们可以通过两种不同的实现思路来实现：</strong></p>
<ol>
<li>方式一：通过<strong>v-if</strong>来判断，显示不同的组件；</li>
<li>方式二：<strong>动态组件</strong>的方式；</li>
<li>方式三：<strong>路由实现</strong>（日后学到再说）</li>
</ol>
<h3 id="v-if-实现"><a href="#v-if-实现" class="headerlink" title="v-if 实现"></a>v-if 实现</h3><p>我们可以先通过 v-if 来判断显示不同的组件，这个可以使用我们之前讲过的知识来实现：</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210811211229950.png" alt="image-20210811211229950"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210811211332131.png" alt="image-20210811211332131"></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div&gt;
    &lt;button
      :key="item"
      v-for="item in tabs"
      :class="{ active: currentTab === item }"
      @click="toggle(item)"
    &gt;
      {{ item }}
    &lt;/button&gt;

    &lt;template v-if="currentTab === 'home'"&gt;
      &lt;home&gt;&lt;/home&gt;
    &lt;/template&gt;
    &lt;template v-if="currentTab === 'about'"&gt;
      &lt;about&gt;&lt;/about&gt;
    &lt;/template&gt;
    &lt;template v-if="currentTab === 'category'"&gt;
      &lt;category&gt;&lt;/category&gt;
    &lt;/template&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import About from "./page/About.vue";
import Category from "./page/Category.vue";
import Home from "./page/Home.vue";
export default {
  components: {
    Home,
    About,
    Category,
  },
  data() {
    return {
      tabs: ["home", "about", "category"],
      currentTab: "home",
    };
  },
  methods: {
    toggle(item) {
      this.currentTab = item;
    },
  },
};
&lt;/script&gt;

&lt;style scoped&gt;
.active {
  background-color: #aca;
  color: aqua;
}
button {
  font-size: 20px;
}
&lt;/style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>效果</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210811211416362.png" alt="image-20210811211416362"></p>
<h3 id="动态组件实现"><a href="#动态组件实现" class="headerlink" title="动态组件实现"></a>动态组件实现</h3><p>动态组件是使用 <strong>component</strong> 组件，通过一个特殊的 attribute <strong>is</strong> 来实现：</p>
<p><strong>component：</strong> Vue 的内置组件，根据属性 is 的值，来决定那个组件被选渲染。<code>is</code> 的值是一个字符串，它既可以是 HTML 标签名称也可以是组件名称。<strong>如果你传递组件本身到 <code>is</code> 而不是其名字，则不需要注册。</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210811212012331.png" alt="image-20210811212012331"></p>
<p><strong>这个 currentTab 的值需要是什么内容呢？</strong></p>
<ol>
<li>可以是通过 component 函数注册的组件；</li>
<li>在一个组件对象的 components 对象中注册的组件；</li>
</ol>
<h2 id="动态组件"><a href="#动态组件" class="headerlink" title="动态组件"></a>动态组件</h2><h3 id="动态组件的传值"><a href="#动态组件的传值" class="headerlink" title="动态组件的传值"></a>动态组件的传值</h3><p><strong>如果是动态组件我们可以给它们传值和监听事件吗？</strong></p>
<ol>
<li>也是一样的；</li>
<li>只是我们需要将属性和监听事件放到 component 上来使用；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210811214920431.png" alt="image-20210811214920431"></p>
<h2 id="Keep-alive"><a href="#Keep-alive" class="headerlink" title="Keep-alive"></a>Keep-alive</h2><h3 id="认识-keep-alive"><a href="#认识-keep-alive" class="headerlink" title="认识 keep-alive"></a>认识 keep-alive</h3><p><strong>我们先对之前的案例中 About 组件进行改造：</strong></p>
<p>在其中增加了一个按钮，点击可以递增的功能；</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210811220635353.png" alt="image-20210811220635353"></p>
<p>比如我们将 counter 点到 10，那么在切换到 home 再切换回来 about 时，状态是否<strong>可以保持</strong>呢？</p>
<ol>
<li>答案是否定的；</li>
<li>这是因为默认情况下，我们在切换组件后，about 组件会被销毁掉，再次回来时会重新创建组件；</li>
</ol>
<p>但是，在开发中某些情况我们希望<strong>继续保持组件的状态</strong>，而不是销毁掉，这个时候我们就可以使用一个<strong>内置组件</strong>：<strong>keep-alive。</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210811221617535.png" alt="image-20210811221617535"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210811221725646.png" alt="image-20210811221725646"></p>
<p><strong>的确记录了组件所处的状态。</strong></p>
<h3 id="keep-alive-属性"><a href="#keep-alive-属性" class="headerlink" title="keep-alive 属性"></a>keep-alive 属性</h3><p><strong>keep-alive 有一些属性：</strong></p>
<ol>
<li><strong>include</strong> - string | RegExp | Array。只有名称匹配的组件会被缓 存；</li>
<li><strong>exclude</strong> - string | RegExp | Array。任何名称匹配的组件都不 会被缓存；</li>
<li><strong>max</strong> - number | string。最多可以缓存多少组件实例，一旦达 到这个数字，那么缓存组件中最近没有被访问的实例会被销毁；</li>
</ol>
<p><strong>include 和 exclude prop 允许组件有条件地缓存：</strong></p>
<ol>
<li>二者都可以用逗号分隔字符串、正则表达式或一个数组来表示；</li>
<li>匹配首先检查组件自身的 name 选项；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812090809195.png" alt="image-20210812090809195"></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;!-- 内置组件 keep-alive的使用，
    记录组件的状态，切换时不会被销毁 --&gt;
&lt;!-- 在 keep-alive 这个组件内，
    不要使用注释：不然会报警告，而且也不能记录组件的状态了 --&gt;
&lt;!-- include="组件里面的name属性的值，
    推荐每个组件都加上name属性，和data同级，多个组件名称逗号分隔
    中间不要有空格" --&gt;
&lt;!-- include="about,home" v-bind:include="/正则表达式/" --&gt;
&lt;!-- include="数组" --&gt;
&lt;keep-alive include="about"&gt;
      &lt;component :is="currentTab" :name="'毛毛'" 
      :age="22" @pageClick="click"&gt;&lt;/component&gt;
    &lt;/keep-alive&gt;

&lt;!-- 排除缓存，这个属性匹配到的都不会被缓存 --&gt;
&lt;!-- exclude的用法同上 --&gt;
&lt;keep-alive exclude="about"&gt;
      &lt;component :is="currentTab" :name="'毛毛'" 
      :age="22" @pageClick="click"&gt;&lt;/component&gt;
    &lt;/keep-alive&gt;

&lt;!-- 最大缓存数量，是一个数字，也可以写字符串 --&gt;
&lt;!-- 会清除缓存列表中，最长时间没有被访问的那个组件 --&gt;
&lt;keep-alive max="2"&gt;
      &lt;component :is="currentTab" :name="'毛毛'" 
      :age="22" @pageClick="click"&gt;&lt;/component&gt;
    &lt;/keep-alive&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="缓存组件的生命周期"><a href="#缓存组件的生命周期" class="headerlink" title="缓存组件的生命周期"></a>缓存组件的生命周期</h3><p>对于缓存的组件来说，再次进入时，我们是不会执行<strong>created</strong>或者<strong>mounted</strong>等生命周期函数的：</p>
<ol>
<li>但是有时候我们确实希望监听到何时重新进入到了组件，何时离开了组件；</li>
<li>这个时候我们可以使用 activated 和 deactivated 这两个生命周期钩子函数来监听；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812143746757.png" alt="image-20210812143746757"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812143904102.png" alt="image-20210812143904102"></p>
<h2 id="Webpack5-打包"><a href="#Webpack5-打包" class="headerlink" title="Webpack5 打包"></a>Webpack5 打包</h2><h3 id="Webpack-的代码分包"><a href="#Webpack-的代码分包" class="headerlink" title="Webpack 的代码分包"></a>Webpack 的代码分包</h3><p><strong>默认的打包过程：</strong></p>
<p>默认情况下，在构建整个组件树的过程中，因为<strong>组件和组件之间是通过模块化直接依赖的</strong>，那么<strong>webpack 在打包</strong>时就会将组 件模块打包到一起（比如一个<strong>app.js</strong>文件中）；</p>
<p>这个时候随着项目的不断庞大，app.js 文件的内容过大，会造成<strong>首屏的</strong>渲染速度变慢；</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812093141976.png" alt="image-20210812093141976"></p>
<p><strong>打包时，代码的分包：</strong></p>
<ol>
<li>所以，对于一些不需要立即使用的组件，我们可以单独对它们进行拆分，拆分成一些小的代码块 chunk.js；</li>
<li>这些 chunk.js 会在需要时从服务器加载下来，并且运行代码，显示对应的内容；</li>
</ol>
<p><strong>那么 webpack 中如何可以对代码进行分包呢？</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812093944480.png" alt="image-20210812093944480"></p>
<h2 id="异步组件"><a href="#异步组件" class="headerlink" title="异步组件"></a>异步组件</h2><h3 id="Vue-中实现异步组件"><a href="#Vue-中实现异步组件" class="headerlink" title="Vue 中实现异步组件"></a>Vue 中实现异步组件</h3><p>如果我们的项目过大了，对于<strong>某些组件我们希望通过异步的方式来进行加载</strong>（目的是可以对其进行<strong>分包处理</strong>），那 么 Vue 中给我们提供了一个函数：<strong>defineAsyncComponent</strong>。</p>
<p><strong>defineAsyncComponent 接受两种类型的参数：</strong></p>
<ol>
<li>类型一：工厂函数，该工厂函数需要返回一个 Promise 对象；</li>
<li>类型二：接受一个对象类型，对异步函数进行配置；</li>
</ol>
<h4 id="工厂函数类型一的写法"><a href="#工厂函数类型一的写法" class="headerlink" title="工厂函数类型一的写法"></a>工厂函数类型一的写法</h4><p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812095742723.png" alt="image-20210812095742723"></p>
<h4 id="异步组件对象类型写法"><a href="#异步组件对象类型写法" class="headerlink" title="异步组件对象类型写法"></a>异步组件对象类型写法</h4><p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812100721257.png" alt="image-20210812100721257"></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// import AsyncCategory from './AsyncCategory.vue'</span>

<span class="token comment">// 打包组件时也进行分包，需要使用vue3中提供好的一个函数</span>
<span class="token comment">// defineAsyncComponent</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineAsyncComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>
<span class="token comment">// 现在这个组件 AsyncCategory 就变成异步组件了，组件的使用和注册还是和以前一样</span>
<span class="token comment">// const AsyncCategory =</span>
<span class="token comment">//   defineAsyncComponent(() =&gt; import('./AsyncCategory.vue'));</span>

<span class="token keyword">const</span> AsyncCategory <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 工厂函数，只有这一个参数时，和上个写法没有区别</span>
  <span class="token function-variable function">loader</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"./AsyncCategory.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// 加载过程中显示的组件，当真正的组件加载完毕时会进行切换</span>
  loadingComponent<span class="token operator">:</span> Loading<span class="token punctuation">,</span>
  <span class="token comment">// 加载失败时显示的组件</span>
  errorComponent<span class="token operator">:</span> ErrorCmp<span class="token punctuation">,</span>
  <span class="token comment">// 在显示 loadingComponent 组件之前的延迟，默认值是200 单位ms</span>
  <span class="token comment">// 只有指定时长没有加载完毕我们loader指定的组件，才会显示 loadingComponent</span>
  delay<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
  <span class="token comment">// timeout 超时时间，超过了指定时间没有加载完毕指定组件</span>
  <span class="token comment">// 则会显示错误组件，默认值 Infinity 不超时</span>
  timeout<span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
  <span class="token comment">// 组件是否可以挂起 默认值 true</span>
  suspensible<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// onError 监听组件是否发生错误</span>
  <span class="token comment">/* 
  err: 错误信息
  retry: 一个函数，调用该函数则进行重新加载
  fail: 一个函数 允许加载程序结束退出（类似于强制结束）
  attempts: 重试次数
  */</span>
  <span class="token function-variable function">onError</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> retry<span class="token punctuation">,</span> fail<span class="token punctuation">,</span> attempts</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span> AsyncCategory <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="异步组件和-Suspense"><a href="#异步组件和-Suspense" class="headerlink" title="异步组件和 Suspense"></a>异步组件和 Suspense</h3><h4 id="Suspense"><a href="#Suspense" class="headerlink" title="Suspense"></a>Suspense</h4><p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812102407747.png" alt="image-20210812102407747"></p>
<p><strong>目前：Suspense 显示的是一个实验性的特性，API 随时可能会修改。</strong></p>
<p><strong>Suspense 是一个内置的全局组件，该组件有两个插槽：</strong></p>
<ol>
<li>default：如果 default 可以显示，那么显示 default 的内容；</li>
<li>fallback：如果 default 无法显示，那么会显示 fallback 插槽的内容；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812103328161.png" alt="image-20210812103328161"></p>
<h2 id="引用元素和组件"><a href="#引用元素和组件" class="headerlink" title="$引用元素和组件"></a>$引用元素和组件</h2><h3 id="refs-的使用"><a href="#refs-的使用" class="headerlink" title="$refs 的使用"></a>$refs 的使用</h3><p><strong>某些情况下，我们在组件中想要直接获取到元素对象或者子组件实例：</strong></p>
<ol>
<li>在 Vue 开发中我们是不推荐进行 DOM 操作的；</li>
<li>这个时候，我们可以给元素或者组件绑定一个 ref 的 attribute 属性；</li>
</ol>
<p><strong>组件实例有一个$refs 属性：</strong></p>
<p>它一个对象 Object，持有注册过 <strong>ref attribute</strong> 的所有 DOM 元素和组件实例</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812111727677.png" alt="image-20210812111727677"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812112214446.png" alt="image-20210812112214446"></p>
<h3 id="parent和-root"><a href="#parent和-root" class="headerlink" title="$parent和$root"></a>$parent和$root</h3><p><strong>我们可以通过$parent 来访问父元素。</strong></p>
<p>HelloWorld.vue 的实现：</p>
<p>这里我们也可以<strong>通过$root</strong>来实现，因为 App 是我们的根组件；</p>
<p>注意：在<strong>Vue3</strong>中已经<strong>移除了$children 的</strong>属性，所以不可以使用了。</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812112904661.png" alt="image-20210812112904661"></p>
<h3 id="el"><a href="#el" class="headerlink" title="$el"></a>$el</h3><p><strong>可以拿到根元素，就是使用本组件的根 DOM 元素。但是不能操作</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812113751687.png" alt="image-20210812113751687"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812113837138.png" alt="image-20210812113837138"></p>
<p><strong>实际上拿到的就是自己，组件本质上也是一个个的 html，dom 元素，根元素就是本组件的的根元素</strong></p>
<p><strong>如果本组件出现了多个根标签，比如：</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812114118598.png" alt="image-20210812114118598"></p>
<p><strong>我们不使用 div 进行包裹，那么，获取的值$el 获取的值又会不同</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812114217105.png" alt="image-20210812114217105"></p>
<p><strong>vue3 已经可以不使用单个根标签了。但是本质上还是被一个其他标签进行了包裹的。</strong></p>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><h3 id="认识生命周期"><a href="#认识生命周期" class="headerlink" title="认识生命周期"></a>认识生命周期</h3><p><strong>什么是生命周期呢？</strong></p>
<ol>
<li>每个组件都可能会经历从<strong>创建、挂载、更新、卸载</strong>等一系列的过程；</li>
<li>在这个过程中的某一个阶段，用于可能会想要<strong>添加一些属于自己的代码逻辑</strong>（比如组件创建完后就请求一些服 务器数据）；</li>
<li>但是我们如何可以知道目前组件正在哪一个过程呢？Vue 给我们提供了组件的<strong>生命周期函数</strong></li>
</ol>
<p><strong>生命周期函数：</strong></p>
<ol>
<li><strong>生命周期函数是一些钩子函数</strong>，在某个时间会被<strong>Vue 源码内部进行回调；</strong></li>
<li>通过<strong>对生命周期函数的回调</strong>，我们可以知道<strong>目前组件正在经历什么阶段</strong>；</li>
<li>那么我们就可以在该生命周期中编写<strong>属于自己的逻辑代码</strong>了；</li>
</ol>
<h3 id="生命周期的流程"><a href="#生命周期的流程" class="headerlink" title="生命周期的流程"></a>生命周期的流程</h3><p><a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/instance.html#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90">生命周期图</a></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812134823543.png" alt="image-20210812134823543"></p>
<h2 id="组件的-v-model"><a href="#组件的-v-model" class="headerlink" title="组件的 v-model"></a>组件的 v-model</h2><h3 id="组件-v-model-的实现"><a href="#组件-v-model-的实现" class="headerlink" title="组件 v-model 的实现"></a>组件 v-model 的实现</h3><p><strong>那么，为了我们的 MyInput 组件可以正常的工作，这个组件内的 <input> 必须：</strong></p>
<ol>
<li>将其 value attribute 绑定到一个名叫 <strong>modelValue</strong> 的 prop 上；</li>
<li>在其 input 事件被触发时，将新的值通过自定义的 <strong>update:modelValue</strong> 事件抛出；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812145850159.png" alt="image-20210812145850159"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812145956762.png" alt="image-20210812145956762"></p>
<p><strong>如果我们直接在组件内部使用 v-model 绑定外界传进来的属性值来进行双向绑定会怎么样呢？首先这种做法不可取，其次也不会影响到外界的值</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812150633849.png" alt="image-20210812150633849"></p>
<h3 id="computed-实现"><a href="#computed-实现" class="headerlink" title="computed 实现"></a>computed 实现</h3><p>我们依然希望在组件内部按照双向绑定的做法去完成，应该如何操作呢？我们可以使用<strong>计算属性的 setter 和 getter 来完成。</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812151236189.png" alt="image-20210812151236189"></p>
<h3 id="绑定多个属性"><a href="#绑定多个属性" class="headerlink" title="绑定多个属性"></a>绑定多个属性</h3><p>我们现在通过 v-model 是直接绑定了一个属性，如果我们<strong>希望绑定多个属性呢？</strong></p>
<ol>
<li>也就是我们希望在一个组件上使用<strong>多个 v-model 是否可以实现</strong>呢？</li>
<li>我们知道，默认情况下的 v-model 其实是绑定了 <strong>modelValue</strong> 属性和 <strong>@update:modelValue</strong>的事件；</li>
<li>如果我们希望绑定更多，可以给<strong>v-model 传入一个参数</strong>，那么这个参数的名称就是<strong>我们绑定属性的名称</strong>；</li>
</ol>
<p><strong>注意：这里我是绑定了两个属性的</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812152740822.png" alt="image-20210812152740822"></p>
<p><strong>v-model:age 相当于做了两件事：</strong></p>
<ol>
<li><strong>绑定了 age 属性；</strong></li>
<li><strong>监听了 @update:age 的事件；</strong></li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812153016033.png" alt="image-20210812153016033"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210812153035830.png" alt="image-20210812153035830"></p>
<h1 id="Vue3-过渡-amp-动画实现"><a href="#Vue3-过渡-amp-动画实现" class="headerlink" title="Vue3 过渡&amp;动画实现"></a>Vue3 过渡&amp;动画实现</h1><h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><h3 id="认识动画"><a href="#认识动画" class="headerlink" title="认识动画"></a>认识动画</h3><p>在开发中，我们想要给一个组件的显示和消失添加某种<strong>过渡动画</strong>，可以很好的<strong>增加用户体验</strong>：</p>
<ol>
<li>React 框架本身并没有提供任何动画相关的 API，所以在 React 中使用过渡动画我们需要使用一个第三方库 react-transition-group；</li>
<li>Vue 中为我们提供一些内置组件和对应的 API 来完成动画，利用它们我们可以方便的实现过渡动画效果；</li>
</ol>
<p><strong>我们来看一个案例：</strong></p>
<p>Hello World 的显示和隐藏；</p>
<p>通过下面的代码实现，是不会有任何动画效果的；</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210813163332445.png" alt="image-20210813163332445"></p>
<hr>
<p><strong>没有动画的情况下，整个内容的显示和隐藏会非常的生硬：</strong></p>
<p>如果我们希望给单元素或者组件实现过渡动画，可以使用 <strong>transition</strong> 内置组件来完成动画；</p>
<h3 id="Vue-的-transition-动画"><a href="#Vue-的-transition-动画" class="headerlink" title="Vue 的 transition 动画"></a>Vue 的 transition 动画</h3><p><strong>Vue 提供了 transition 的封装组件</strong>，在下列情形中，可以给任何元素和组件添加进入/离开过渡：</p>
<ol>
<li><strong>p 条件渲染 (使用 v-if)条件展示 (使用 v-show)</strong></li>
<li><strong>动态组件</strong></li>
<li><strong>组件根节点</strong></li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210813164522866.png" alt="image-20210813164522866"></p>
<h3 id="Transition-组件的原理"><a href="#Transition-组件的原理" class="headerlink" title="Transition 组件的原理"></a>Transition 组件的原理</h3><p><strong>我们会发现，Vue 自动给 h2 元素添加了动画，这是什么原因呢？</strong></p>
<p><strong>当插入或删除包含在 transition 组件中的元素时，Vue 将会做以下处理：</strong></p>
<ol>
<li>自动<strong>嗅探</strong>目标元素是否<strong>应用了 CSS 过渡或者动画</strong>，如果有，那么在恰当的时机<strong>添加/删除 CSS 类名</strong>；</li>
<li>如果 <strong>transition</strong> 组件提供了<strong>JavaScript 钩子函数</strong>，这些钩子函数将在恰当的时机被调用；</li>
<li>如果没有找到 JavaScript 钩子并且也没有检测到 CSS 过渡/动画，<strong>DOM 插入、删除操作将会立即执行；</strong></li>
</ol>
<p><strong>那么都会添加或者删除哪些 class 呢？</strong></p>
<h3 id="过渡动画-class"><a href="#过渡动画-class" class="headerlink" title="过渡动画 class"></a>过渡动画 class</h3><p><strong>我们会发现上面提到了很多个 class，事实上 Vue 就是帮助我们在这些 class 之间来回切换完成的动画：</strong></p>
<ol>
<li> <strong>v-enter-from：</strong>定义进入过渡的开始状态。在元素被插入之前生效，在元素被插入之后的下一帧移除。</li>
<li> <strong>v-enter-active：</strong>定义进入过渡生效时的状态。在整个进入过渡的阶段中应用，在元素被插入之前生效，在过渡/动 画完成之后移除。这个类可以被用来定义进入过渡的过程时间，延迟和曲线函数。</li>
<li> <strong>v-enter-to：</strong>定义进入过渡的结束状态。在元素被插入之后下一帧生效 (与此同时 v-enter-from 被移除)，在过渡/ 动画完成之后移除。</li>
<li> <strong>v-leave-from：</strong>定义离开过渡的开始状态。在离开过渡被触发时立刻生效，下一帧被移除。</li>
<li> <strong>v-leave-active：</strong>定义离开过渡生效时的状态。在整个离开过渡的阶段中应用，在离开过渡被触发时立刻生效，在 过渡/动画完成之后移除。这个类可以被用来定义离开过渡的过程时间，延迟和曲线函数。</li>
<li> <strong>v-leave-to：</strong>离开过渡的结束状态。在离开过渡被触发之后下一帧生效 (与此同时 v-leave-from 被删除)，在过渡/ 动画完成之后移除。</li>
</ol>
<h4 id="class-添加的时机和命名规则"><a href="#class-添加的时机和命名规则" class="headerlink" title="class 添加的时机和命名规则"></a>class 添加的时机和命名规则</h4><p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210813171422027.png" alt="image-20210813171422027"></p>
<p><strong>class 的 name 命名规则如下：</strong></p>
<ol>
<li>如果我们使用的是一个没有 name 的 transition，那么所有的 class 是以 v- 作为默认前缀；</li>
<li>如果我们添加了一个 name 属性，比如 ，那么所有的 class 会以 <strong>name 属性值-</strong> 开头；</li>
</ol>
<h4 id="过渡-css-动画"><a href="#过渡-css-动画" class="headerlink" title="过渡 css 动画"></a>过渡 css 动画</h4><p>前面我们是通过<strong>transition</strong>来实现的动画效果，另外我们也可以通过<strong>animation</strong>来实现。</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210813174438158.png" alt="image-20210813174438158"></p>
<h4 id="同时设置过渡和动画"><a href="#同时设置过渡和动画" class="headerlink" title="同时设置过渡和动画"></a>同时设置过渡和动画</h4><p>Vue 为了知道过渡的完成，内部是在监听 transitionend 或 animationend，到底使用哪一个取决于元素应用的 CSS 规则：</p>
<p>如果我们只是使用了其中的一个，那么 Vue 能自动识别类型并设置监听；</p>
<p><strong>但是如果我们同时使用了过渡和动画呢？</strong></p>
<ol>
<li>并且在这个情况下可能某一个动画执行结束时，另外一个动画还没有结束；</li>
<li>在这种情况下，我们可以设置 type 属性为 animation 或者 transition 来明确的告知 Vue 监听的类型；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210813211840483.png" alt="image-20210813211840483"></p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.mydiv</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> aqua<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.mao-enter-from,
.mao-leave-to</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.mao-enter-to,
.mao-enter-from</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.mao-enter-active</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> bounce 2s ease<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.mao-leave-active</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> bounce 2s reverse<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.mao-enter-active,
.mao-leave-active</span> <span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> opacity 1s ease<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 定义动画帧 */</span>
<span class="token atrule"><span class="token rule">@keyframes</span> bounce</span> <span class="token punctuation">{</span>
  <span class="token selector">0%</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">50%</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">100%</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="显示的指定动画时间"><a href="#显示的指定动画时间" class="headerlink" title="显示的指定动画时间"></a>显示的指定动画时间</h4><p>我们也可以显示的来指定过渡的时间，<strong>通过 duration 属性。</strong></p>
<p><strong>duration 可以设置两种类型的值：</strong></p>
<ol>
<li>number 类型：同时设置进入和离开的过渡时间；</li>
<li>object 类型：分别设置进入和离开的过渡时间；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210813212205061.png" alt="image-20210813212205061"></p>
<h4 id="过渡的模式-mode"><a href="#过渡的模式-mode" class="headerlink" title="过渡的模式 mode"></a>过渡的模式 mode</h4><p><strong>我们来看当前的动画在两个元素之间切换的时候存在的问题：</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210813212531361.png" alt="image-20210813212531361"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210813212513947.png" alt="image-20210813212513947"></p>
<p>我们会发现 <strong>两个元素的动画是同时存在的</strong>：</p>
<ol>
<li>这是因为默认情况下进入和离开动画是同时发生的；</li>
<li>如果确实我们希望达到这个的效果，那么是没有问题；</li>
</ol>
<p>但是如果我们<strong>不希望同时执行进入和离开动画</strong>，那么我们需要设置 t<strong>ransition 的过渡模式：</strong></p>
<ol>
<li><strong>in-out:</strong> 新元素先进行过渡，完成之后当前元素过渡离开；</li>
<li><strong>out-in:</strong> 当前元素先进行过渡，完成之后新元素过渡进入；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210813213053898.png" alt="image-20210813213053898"></p>
<h3 id="动态组件的切换"><a href="#动态组件的切换" class="headerlink" title="动态组件的切换"></a>动态组件的切换</h3><h4 id="动态组件的切换动画"><a href="#动态组件的切换动画" class="headerlink" title="动态组件的切换动画"></a>动态组件的切换动画</h4><p><strong>上面的示例同样适用于我们的动态组件：</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210813214234810.png" alt="image-20210813214234810"></p>
<h4 id="appear-初次渲染"><a href="#appear-初次渲染" class="headerlink" title="appear 初次渲染"></a>appear 初次渲染</h4><p>默认情况下，<strong>首次渲染的时候是没有动画的</strong>，如果我们希望给他添加上去动画，那么就可以增加另外一个属性 <strong>appear</strong>：</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210813214335867.png" alt="image-20210813214335867"></p>
<h3 id="第三方动画库"><a href="#第三方动画库" class="headerlink" title="第三方动画库"></a>第三方动画库</h3><h4 id="认识-animate-css"><a href="#认识-animate-css" class="headerlink" title="认识 animate.css"></a>认识 animate.css</h4><p>如果我们手动一个个来编写这些动画，那么效率是比较低的，所以在开发中我们可能会<strong>引用一些第三方库的动画库， 比如 animate.css。</strong></p>
<p><strong>什么是 animate.css 呢？</strong></p>
<p><strong>Animate.css</strong> is a library of ready-to-use, cross-browser animations for use in your web projects. Great for emphasis, home pages, sliders, and attention-guiding hints.</p>
<p><strong>Animate.css</strong>是一个已经准备好的、跨平台的动画库为我们的 web 项目，对于<strong>强调、主页、滑动、注意力引导</strong> 非常有用；</p>
<p><strong>如何使用 Animate 库呢？</strong></p>
<ol>
<li>第一步：需要安装 animate.css 库；</li>
<li>第二步：导入 animate.css 库的样式；</li>
<li>第三步：使用 animation 动画或者 animate 提供的类；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814094340607.png" alt="image-20210814094340607"></p>
<h4 id="自定义过渡-class"><a href="#自定义过渡-class" class="headerlink" title="自定义过渡 class"></a>自定义过渡 class</h4><p><strong>我们可以通过以下 attribute 来自定义过渡类名：</strong></p>
<ol>
<li>enter-from-class</li>
<li>enter-active-class</li>
<li>enter-to-class</li>
<li>leave-from-class</li>
<li>leave-active-class</li>
<li>leave-to-class</li>
</ol>
<p>他们的优先级高于普通的类名，这对于 Vue 的过渡系统和其他第三方 CSS 动画库，如 <strong>Animate.css</strong>. 结合使用十 分有用。</p>
<h4 id="animate-css-库的使用"><a href="#animate-css-库的使用" class="headerlink" title="animate.css 库的使用"></a>animate.css 库的使用</h4><p><strong>安装 animate.css：</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">npm i animate.css --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>在 main.js 中导入 animate.css：</strong></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token string">"animate.css"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>接下来在使用的时候我们有两种用法：</strong></p>
<p>用法一：直接使用 animate 库中定义的 keyframes 动画；</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814095212789.png" alt="image-20210814095212789"></p>
<p>用法二：直接使用 animate 库提供给我们的类；</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814095242072.png" alt="image-20210814095242072"></p>
<h3 id="认识-gsap-库"><a href="#认识-gsap-库" class="headerlink" title="认识 gsap 库"></a>认识 gsap 库</h3><p>某些情况下我们希望通过 JavaScript 来实现一些动画的效果，这个时候我们可以选择使用 gsap 库来完成。</p>
<p><strong>什么是 gsap 呢？</strong></p>
<ol>
<li>GSAP 是 The GreenSock Animation Platform（GreenSock 动画平台）的缩写；</li>
<li>它可以通过 JavaScript 为 CSS 属性、SVG、Canvas 等设置动画，并且是浏览器兼容的；</li>
</ol>
<p><strong>这个库应该如何使用呢？</strong></p>
<ol>
<li>第一步：需要安装 gsap 库；</li>
<li>第二步：导入 gsap 库；</li>
<li>第三步：使用对应的 api 即可；</li>
</ol>
<p><strong>我们可以先安装一下 gsap 库：</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">npm i gsap<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="JavaScript-钩子"><a href="#JavaScript-钩子" class="headerlink" title="JavaScript 钩子"></a>JavaScript 钩子</h4><p>在使用动画之前，我们先来看一下<strong>transition</strong>组件给我们提供的<strong>JavaScript 钩子，</strong>这些钩子可以帮助我们监听动画执行到 什么阶段了。</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814101138774.png" alt="image-20210814101138774"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814101157536.png" alt="image-20210814101157536"></p>
<p>当我们使用 JavaScript 来执行过渡动画时，需要<strong>进行 done 回调</strong>，否则它们将会被同步调用，过渡会立即完成。</p>
<p>添加 <strong>:css=”false”，</strong>也会让 <strong>Vue 会跳过 CSS 的检测</strong>，除了性能略高之外，这可以<strong>避免过渡过程中 CSS 规则的影响</strong>。</p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814101301362.png" alt="image-20210814101301362"></p>
<h4 id="gsap-库的使用"><a href="#gsap-库的使用" class="headerlink" title="gsap 库的使用"></a>gsap 库的使用</h4><p><strong>那么接下来我们就可以结合 gsap 库来完成动画效果：</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814103331698.png" alt="image-20210814103331698"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814103336037.png" alt="image-20210814103336037"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814103339396.png" alt="image-20210814103339396"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814103400933.png" alt="image-20210814103400933"></p>
<h4 id="gsap-实现数字变化动画"><a href="#gsap-实现数字变化动画" class="headerlink" title="gsap 实现数字变化动画"></a>gsap 实现数字变化动画</h4><p>在一些项目中，我们会见到<strong>数字快速变化的动画效果</strong>，这个动画可以<strong>很容易通过 gsap 来实现：</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814104630294.png" alt="image-20210814104630294"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814104646356.png" alt="image-20210814104646356"></p>
<h4 id="认识列表的过渡"><a href="#认识列表的过渡" class="headerlink" title="认识列表的过渡"></a>认识列表的过渡</h4><p>目前为止，过渡动画我们只要是<strong>针对单个元素或者组件</strong>的：</p>
<p>要么是单个节点； 要么是同一时间渲染多个节点中的一个；</p>
<p>那么如果希望渲染的是一个列表，并且<strong>该列表中添加删除数据也希望有动画执行</strong>呢？</p>
<p>这个时候我们要使用 <transition-group> 组件来完成；</transition-group></p>
<p><strong>使用<transition-group> 有如下的特点：</transition-group></strong></p>
<ol>
<li>默认情况下，它不会渲染一个元素的包裹器，但是你可以指定一个元素并以 tag attribute 进行渲染；</li>
<li>过渡模式 <strong>mode</strong> 不可用，因为我们不再相互切换特有的元素；</li>
<li>内部元素总是需要提供唯一的 key attribute 值；</li>
<li>CSS 过渡的类将会应用在内部的元素中，而不是这个组/容器本身；</li>
</ol>
<h4 id="列表过渡的基本使用"><a href="#列表过渡的基本使用" class="headerlink" title="列表过渡的基本使用"></a>列表过渡的基本使用</h4><p><strong>我们来做一个案例：</strong></p>
<p>案例是一列数字，可以继续添加或者删除数字；</p>
<p><strong>在添加和删除数字的过程中，对添加的或者移除的数字添加动画；</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814111215939.png" alt="image-20210814111215939"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814111236462.png" alt="image-20210814111236462"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814111344677.png" alt="image-20210814111344677"></p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>addNum<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>添加数字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>delNum<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>删除数字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- 列表的过渡，使用该内置组件进行包裹 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition-group</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>p<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mao<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>number in numbers<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{{ number }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition-group</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        numbers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        numberCounter<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// this.numbers.push(this.numberCounter++)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numbers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">randomIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numberCounter<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">delNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numbers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">randomIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">randomIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numbers<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">button</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">span</span> <span class="token punctuation">{</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token comment">/* 转为行内块元素 */</span>
    <span class="token comment">/* 行内元素是不能改变宽高等 */</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.mao-enter-from,
  .mao-leave-to</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>30px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.mao-enter-active,
  .mao-leave-active</span> <span class="token punctuation">{</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 2s ease-in<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="列表过渡的移动动画"><a href="#列表过渡的移动动画" class="headerlink" title="列表过渡的移动动画"></a>列表过渡的移动动画</h4><p><strong>在上面的案例中虽然新增的或者删除的节点是有动画的，但是对于哪些其他需要移动的节点是没有动画的：</strong></p>
<ol>
<li>我们可以通过使用一个新增的 v-move 的 class 来完成动画；</li>
<li>它会在元素改变位置的过程中应用；</li>
<li>像之前的名字一样，我们可以通过 name 来自定义前缀；</li>
</ol>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814112549656.png" alt="image-20210814112549656"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814112553932.png" alt="image-20210814112553932"></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814112658298.png" alt="image-20210814112658298"></p>
<h4 id="列表的交错过渡案例"><a href="#列表的交错过渡案例" class="headerlink" title="列表的交错过渡案例"></a>列表的交错过渡案例</h4><p><strong>我们来通过 gsap 的延迟 delay 属性，做一个交替消失的动画：</strong></p>
<p><img src="https://gitee.com/maolovecoding/picture/raw/master/images/web/vue/image-20210814115410408.png" alt="image-20210814115410408"></p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>keyword<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- 使用ul进行包裹动画的元素 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition-group</span>
      <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ul<span class="token punctuation">"</span></span>
      <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mao<span class="token punctuation">"</span></span>
      <span class="token attr-name">@before-enter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beforeEnter<span class="token punctuation">"</span></span>
      <span class="token attr-name">@enter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enter<span class="token punctuation">"</span></span>
      <span class="token attr-name">@leave</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>leave<span class="token punctuation">"</span></span>
      <span class="token attr-name">:css</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(name,index) in showNames<span class="token punctuation">"</span></span> <span class="token attr-name">:data-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        {{ name }}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition-group</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> gsap <span class="token keyword">from</span> <span class="token string">"gsap"</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        keyword<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
        names<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">"aaa"</span><span class="token punctuation">,</span>
          <span class="token string">"avc"</span><span class="token punctuation">,</span>
          <span class="token string">"read"</span><span class="token punctuation">,</span>
          <span class="token string">"tre"</span><span class="token punctuation">,</span>
          <span class="token string">"tres"</span><span class="token punctuation">,</span>
          <span class="token string">"ttt"</span><span class="token punctuation">,</span>
          <span class="token string">"www"</span><span class="token punctuation">,</span>
          <span class="token string">"mao"</span><span class="token punctuation">,</span>
          <span class="token string">"jjj"</span><span class="token punctuation">,</span>
          <span class="token string">"gs"</span><span class="token punctuation">,</span>
          <span class="token string">"gdj"</span><span class="token punctuation">,</span>
          <span class="token string">"adssa"</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    computed<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">showNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>names<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>keyword<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 指定初始化的状态</span>
      <span class="token function">beforeEnter</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opaciy <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">enter</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        gsap<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          opacity<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          height<span class="token operator">:</span> <span class="token string">"1.5em"</span><span class="token punctuation">,</span>
          delay<span class="token operator">:</span> el<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>index <span class="token operator">*</span> <span class="token number">0.2</span><span class="token punctuation">,</span>
          onComplete<span class="token operator">:</span> done<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">leave</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        gsap<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          opacity<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          height<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          delay<span class="token operator">:</span> el<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>index <span class="token operator">*</span> <span class="token number">0.2</span><span class="token punctuation">,</span>
          onComplete<span class="token operator">:</span> done<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token comment">/* .mao-enter-from,.mao-leave-to{
    opacity: 0;
  }
  .mao-enter-to,.mao-leave-from{
    opacity: 1;
  }
  .mao-enter-active,.mao-leave-active{
    transition: opacity 2s ease;
  } */</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">毛毛</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://maolovecoding.github.io/2021/11/04/src/vue/vue3-zu-jian-hua/">https://maolovecoding.github.io/2021/11/04/src/vue/vue3-zu-jian-hua/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">毛毛</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/vue3/">
                                    <span class="chip bg-color">vue3</span>
                                </a>
                            
                                <a href="/tags/ts/">
                                    <span class="chip bg-color">ts</span>
                                </a>
                            
                                <a href="/tags/webpack/">
                                    <span class="chip bg-color">webpack</span>
                                </a>
                            
                                <a href="/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/">
                                    <span class="chip bg-color">组件化</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.jpg" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2021/11/05/src/vue/vuecli-vite/">
                    <div class="card-image">
                        
                        <img src="/medias/photo1/1.jpg" class="responsive-img" alt="Vue-CLI 和 Vite &amp; 尤大大新宠">
                        
                        <span class="card-title">Vue-CLI 和 Vite &amp; 尤大大新宠</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-11-05
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/vue/" class="post-category">
                                    vue
                                </a>
                            
                            <a href="/categories/vue/vite/" class="post-category">
                                    vite
                                </a>
                            
                            <a href="/categories/vue/vite/vue-cli/" class="post-category">
                                    vue-cli
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/vue3/">
                        <span class="chip bg-color">vue3</span>
                    </a>
                    
                    <a href="/tags/ts/">
                        <span class="chip bg-color">ts</span>
                    </a>
                    
                    <a href="/tags/webpack/">
                        <span class="chip bg-color">webpack</span>
                    </a>
                    
                    <a href="/tags/vueCli/">
                        <span class="chip bg-color">vueCli</span>
                    </a>
                    
                    <a href="/tags/vite/">
                        <span class="chip bg-color">vite</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/11/03/src/vue/vue-router/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/15.jpg" class="responsive-img" alt="vue-router">
                        
                        <span class="card-title">vue-router</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-11-03
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/vue-router/" class="post-category">
                                    vue-router
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/vue3/">
                        <span class="chip bg-color">vue3</span>
                    </a>
                    
                    <a href="/tags/ts/">
                        <span class="chip bg-color">ts</span>
                    </a>
                    
                    <a href="/tags/webpack/">
                        <span class="chip bg-color">webpack</span>
                    </a>
                    
                    <a href="/tags/vue-router/">
                        <span class="chip bg-color">vue-router</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('60')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: 毛毛的博客<br />'
            + '文章作者: 毛毛<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('2'),
            headingSelector: 'h2, h3, h4, H5, H6'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4, H5, H6').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
  
  <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

  
  <div class="container row center-align"
    style="margin-bottom: 0px !important;">
    <div class="col s12 m8 l8 copy-right">
      Copyright&nbsp;&copy;
      
      <span id="year">2019-2021</span>
      
      <span id="year">2019</span>
      <a href="/about" target="_blank">毛毛</a>
      <!-- |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
      |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a> -->
      <br>
      
      
      
      
      
      
      <span id="busuanzi_container_site_pv">
        |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
          class="white-color"></span>&nbsp;次
      </span>
      
      
      <span id="busuanzi_container_site_uv">
        |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
          class="white-color"></span>&nbsp;人
      </span>
      
      <br>
      
      <br>
      
    </div>
    <div class="col s12 m4 l4 social-link social-statis">
  <!-- https://github.com/maolovecoding -->
    <a href="https://github.com/maolovecoding/" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto: 1339065735@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>


<!-- 

 -->


    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1339065735" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1339065735" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>

<!-- 
 -->

<!--  -->


    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
  </div>
</footer>

<div class="progress-bar"></div>

    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
